--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:    Glytch3r#1337 / glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]

require "lua_timers"

PsychoZedMod = PsychoZedMod or {}
LuaEventManager.AddEvent("OnDayTimeChange")

PsychoZedMod.outfit1 = 'Psycho1'
PsychoZedMod.outfit2 = 'Psycho2'
LuaEventManager.AddEvent("OnDayTimeChange")

function PsychoZedMod.isDay()
	return forageSystem.getTimeOfDay() == 'isDay'
end

function PsychoZedMod.isNight()
	return forageSystem.getTimeOfDay() == 'isNight'
end

function PsychoZedMod.getDayTime()
	if PsychoZedMod.isNight() then return 'Night' end
	if PsychoZedMod.isDay() then return 'Day' end
	return ''
end

function PsychoZedMod.getDayTimeInt()
	if PsychoZedMod.isNight() then return 2 end
	if PsychoZedMod.isDay() then return 1 end
	return 1
end

function PsychoZedMod.isPsychoZed(zed)
	if not zed then return false end
	if not instanceof(zed, "IsoZombie") then return false end
	local fit = tostring(zed:getOutfitName())
	if fit == PsychoZedMod.outfit1 then return true end
	if fit == PsychoZedMod.outfit2 then return true end
	return false
end


function PsychoZedMod.setOutfit(zed, outfitNum)
    local wearNum = PsychoZedMod.getOutfitNum(zed)
    if wearNum ~= outfitNum then
        if outfitNum == 1 then
            zed:dressInNamedOutfit(PsychoZedMod.outfit1)
        elseif outfitNum == 2 then
            zed:dressInNamedOutfit(PsychoZedMod.outfit2)
        end
        zed:resetModelNextFrame()
		PsychoZedMod.setTag(zed, outfitNum)
        --PsychoZedMod.setWalk(zed)
       -- zed:DoZombieStats()
    end
end


----------------------- get*           ---------------------------
function PsychoZedMod.getOutfitNum(zed)
	if not zed then return nil end
	local fit = tostring(zed:getOutfitName())
	if fit == PsychoZedMod.outfit1 then return 1 end
	if fit == PsychoZedMod.outfit2 then return 2 end
	return nil
end

function PsychoZedMod.isOutfitNum(zed, int)
	if not zed then return false end
	local fit = tostring(zed:getOutfitName())
	if int == 1 then
		if fit == PsychoZedMod.outfit1 then return true end
	elseif int == 2 then
		if fit == PsychoZedMod.outfit2 then return true end
	end
	return false
end
-----------------------     is*       ---------------------------


function PsychoZedMod.isFit1(zed)
	if not zed then return false end
	local fit = tostring(zed:getOutfitName())
	if fit == PsychoZedMod.outfit1 then return true end
	return false
end

function PsychoZedMod.isFit2(zed)
	if not zed then return false end
	local fit = tostring(zed:getOutfitName())
	if fit == PsychoZedMod.outfit2 then return true end
	return false
end

	-----------------------     setPsychoZed* set*          ---------------------------
function PsychoZedMod.setPsychoZed(zed, int)
	if not PsychoZedMod.isPsychoZed(zed) then
		local outfit = PsychoZedMod.outfit1
		if int == 2 then
			outfit = PsychoZedMod.outfit2
		end
		zed:dressInNamedOutfit(outfit)
		zed:DoZombieInventory()
		zed:resetModelNextFrame()
		PsychoZedMod.setTag(zed, int)
		PsychoZedMod.setStats(zed)
	end
end



function PsychoZedMod.FitHandler(zed)
    if not zed then return end
	if not PsychoZedMod.isPsychoZed(zed) then return end

    if PsychoZedMod.isNight() then
        if PsychoZedMod.isFit1(zed) then
            PsychoZedMod.setOutfit(zed, 2)
        end
    elseif PsychoZedMod.isDay() then
        if PsychoZedMod.isFit2(zed) then
            PsychoZedMod.setOutfit(zed, 1)
        end
    end
	--PsychoZedMod.setStats(zed)
end
Events.OnZombieUpdate.Remove(PsychoZedMod.FitHandler)
--Events.OnZombieUpdate.Add(PsychoZedMod.FitHandler)
