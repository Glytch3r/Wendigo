--[[██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                        				 Custom  PZ  Mod  Developer  for  Hire													  |
|‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾‾|
|                       	Portfolio:  https://steamcommunity.com/id/glytch3r/myworkshopfiles/							          |
|                       		                                    														 	  |
|                       	Discord:    Glytch3r#1337 / glytch3r															      |
|                       		                                    														 	  |
|                       	Support:    https://ko-fi.com/glytch3r														    	  |
|_______________________________________________________________________________________________________________________________-]]
--[[_____________________________________________________________________________________________________________________________
   ░▒▓██████▓▒░    ░▒▓████████▓▒░    ░▒▓█▓▒░         ░▒▓█▓▒░      ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░           ░▒▓█▓▒░         ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▓▒░  ░▒▓▒░
  ░▒▓█▓▒▒▓███▓▒░   ░▒▓█▓▒░         ░▒▓██████▓▒░      ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█████████▓▒░     ░▒▓███▓▒░     ░▒▓███████▓▒░
  ░▒▓█▓▒░          ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░         ░▒▓█▓▒░ ░▒▓█▓▒░         ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
  ░▒▓█▓▒░░▒▓█▓▒░   ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░     ░▒▓█▓▒░     ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓█▓▒░ ░▒▓█▓▒░  ▒▓░    ░▒▓█▓▒░   ░▒▓█▒░  ░▒▓█▒░
   ░▒▓█████▓▒░     ░▒▓█▓▒░        ░▒▓█▓▒░░▒▓█▓▒░  ░▒▓███████▓▒░   ░▒▓██████▓▒░   ░▒▓█▓▒░ ░▒▓█▓▒░  ░▒▓███████▓▒░    ░▒▓███████▓▒░
█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████--]]


-----------------------            ---------------------------
--[[
	PsychoZedMod.playSFX(zed, PsychoZedMod.getCrySfx())
	PsychoZedMod.playSFX(zed, PsychoZedMod.getLaughSfx())
	PsychoZedMod.playSFX(zed, PsychoZedMod.getScreamSfx())
 ]]
-----------------------            ---------------------------


PsychoZedMod = PsychoZedMod or {}

function PsychoZedMod.isSprinter(zed)
	local walk = PsychoZedMod.getWalkType(zed)
	if walk then
		if tostring(walk:contains('sprint')) then
			return true
		end
	end
	return false
end

function PsychoZedMod.getWalkType(zed)
	return zed:getVariableString("zombieWalkType")
end

function PsychoZedMod.getWalkNum(zed)
	local walk = zed:getVariableString("zombieWalkType")
	return tonumber(walk:match("%d+"))
end

function PsychoZedMod.isShouldChangeWalkNum(zed)
	local walkNum =  PsychoZedMod.getWalkNum(zed)
	local num =  PsychoZedMod.getDayTimeInt()
	return walkNum ~= num
end


 function PsychoZedMod.setMovement(zed)
	local isChanged = false
	if PsychoZedMod.isPsychoZed(zed) then
		if PsychoZedMod.isShouldChangeWalkNum(zed) then
			local walkNum = tostring(PsychoZedMod.getWalkNum(zed))
			local num = tostring(PsychoZedMod.getDayTimeInt())
			--tostring(PsychoZedMod.getWalkType(zed))
			if PsychoZedMod.isAggro(zed) then
				zed:setWalkType("sprint"..tostring(num))
				isChanged = true
			else
				isChanged = true
				zed:setWalkType(tostring(num))
			end
			if isChanged then
				if getCore():getDebug() then
					if dbgZed == zed then
						local walk = PsychoZedMod.getWalkType(dbgZed)
						dbgZed:addLineChatElement(tostring(walk))
						print(walk)
					end
				end
			end
		end
	end
end
function PsychoZedMod.moveHandler(zed)
	if PsychoZedMod.isPsychoZed(zed) then
		if PsychoZedMod.isShouldChangeWalkNum(zed) then
			PsychoZedMod.setMovement(zed)
		end
	end
end
--Events.OnZombieUpdate.Add(PsychoZedMod.moveHandler)



--[[
 function PsychoZedMod.setMovement(zed)
	if PsychoZedMod.isPsychoZed(zed) then
		if PsychoZedMod.isShouldChangeWalkNum(zed) then
			if PsychoZedMod.isAggro(zed) then
				if not PsychoZedMod.isSprinter(zed) then
					PsychoZedMod.setSprinter(zed)
				end
			else
				if PsychoZedMod.isSprinter(zed) then
					PsychoZedMod.setWalk(zed)
				end
			end
		end
	end
end

 ]]
function PsychoZedMod.setSprinter(zed)
	if  PsychoZedMod.isPsychoZed(zed) then
		local sandOpt = getSandboxOptions()
		local zSpeed = sandOpt:getOptionByName("ZombieLore.Speed"):getValue()
		--zed:setWalkType("sprint"..tostring(PsychoZedMod.getWalkNum(zed)));
		local num = PsychoZedMod.getDayTimeInt()
		sandOpt:set("ZombieLore.Speed", 1)
		zed:setWalkType("sprint"..tostring(num))
		zed:makeInactive(true)
		zed:makeInactive(false)
		zed:DoZombieStats()
		sandOpt:set("ZombieLore.Speed", zSpeed)
	end
end

function PsychoZedMod.setWalk(zed)
	if  PsychoZedMod.isPsychoZed(zed) then
		local sandOpt = getSandboxOptions()
		local zSpeed = sandOpt:getOptionByName("ZombieLore.Speed"):getValue()
		local num = PsychoZedMod.getDayTimeInt()
		sandOpt:set("ZombieLore.Speed", 2)
		zed:setWalkType(tostring(num))
		zed:makeInactive(true)
		zed:makeInactive(false)
		zed:DoZombieStats()
		sandOpt:set("ZombieLore.Speed", zSpeed)
	end
end


function PsychoZedMod.setTurnSpeed(zed, int)
	if zed:getTurnDelta() ~= int  then
		zed:setTurnDelta(int)
	end
end


function PsychoZedMod.isMoving(zed)
	if not zed then return false end
	if not PsychoZedMod.isPsychoZed(zed) then return false end
	if zed:getVariableBoolean('bMoving') then
	--if zed:isBehaviourMoving() or zed:isCurrentState(WalkTowardState.instance()) or zed:isCurrentState(WalkTowardNetworkState.instance()) or zed:isCurrentState(PathFindState.instance()) then
		return true
	end
end

